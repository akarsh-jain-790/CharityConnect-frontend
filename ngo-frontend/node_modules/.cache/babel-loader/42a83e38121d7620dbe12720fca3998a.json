{"ast":null,"code":"import _defineProperty from\"/Volumes/T7/IT_Days/ngo-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Volumes/T7/IT_Days/ngo-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Volumes/T7/IT_Days/ngo-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";var baseUrl=\"http://localhost:4000/api/v1\";/**\n * @asyncThunk Search Books function.\n * @param  string $user - user state\n * @return returns user data in case of success and in case of error return error message.\n */export var searchBooks=createAsyncThunk(\"books/searchBooks\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(q){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(baseUrl,\"/books/searchBooks/?\").concat(q),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;if(!response.ok){_context.next=10;break;}return _context.abrupt(\"return\",json);case 10:throw new Error(json.message);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());/**\n * @asyncThunk Book fetch function.\n * @param  int page - page number\n * @return returns the books.\n */export var fetchAllBooks=createAsyncThunk(\"books/getBooks\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(page){var response,json;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(baseUrl,\"/books/getBooks/?page=\").concat(page,\"&limit=6\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:json=_context2.sent;if(!response.ok){_context2.next=10;break;}return _context2.abrupt(\"return\",json);case 10:throw new Error(json.message);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());export var bookSlice=createSlice({name:\"books\",initialState:{book:[],searchBook:[],totalPages:0,currentPage:0,pendinng:false,success_message:\"\",error:false,error_message:\"\"},reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchAllBooks.pending,function(state){state.pending=true;}),_defineProperty(_extraReducers,fetchAllBooks.fulfilled,function(state,action){state.pending=false;state.book=action.payload.books;state.totalPages=action.payload.totalPages;state.currentPage=Number(action.payload.currentPage);state.success_message=action.payload.message;}),_defineProperty(_extraReducers,fetchAllBooks.rejected,function(state,action){state.pending=false;state.error=true;console.log(\"error\",action.error.message);state.error_message=action.error.message;}),_defineProperty(_extraReducers,searchBooks.pending,function(state){state.pending=true;}),_defineProperty(_extraReducers,searchBooks.fulfilled,function(state,action){state.pending=false;state.searchBook=action.payload.books;state.success_message=action.payload.message;}),_defineProperty(_extraReducers,searchBooks.rejected,function(state,action){state.pending=false;state.error=true;console.log(\"error\",action.error.message);state.error_message=action.error.message;}),_extraReducers)});export default bookSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","baseUrl","searchBooks","q","fetch","method","headers","response","json","ok","Error","message","fetchAllBooks","page","bookSlice","name","initialState","book","searchBook","totalPages","currentPage","pendinng","success_message","error","error_message","reducers","extraReducers","pending","state","fulfilled","action","payload","books","Number","rejected","console","log","reducer"],"sources":["/Volumes/T7/IT_Days/ngo-frontend/src/redux/Slices/bookSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nconst baseUrl = `http://localhost:4000/api/v1`;\n\n/**\n * @asyncThunk Search Books function.\n * @param  string $user - user state\n * @return returns user data in case of success and in case of error return error message.\n */\nexport const searchBooks = createAsyncThunk(\"books/searchBooks\", async (q) => {\n  const response = await fetch(`${baseUrl}/books/searchBooks/?${q}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  const json = await response.json();\n  if (response.ok) {\n    return json;\n  } else {\n    throw new Error(json.message);\n  }\n});\n\n/**\n * @asyncThunk Book fetch function.\n * @param  int page - page number\n * @return returns the books.\n */\nexport const fetchAllBooks = createAsyncThunk(\n  \"books/getBooks\",\n  async (page) => {\n    const response = await fetch(\n      `${baseUrl}/books/getBooks/?page=${page}&limit=6`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n\n    const json = await response.json();\n    if (response.ok) {\n      return json;\n    } else {\n      throw new Error(json.message);\n    }\n  }\n);\n\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    book: [],\n    searchBook: [],\n    totalPages: 0,\n    currentPage: 0,\n    pendinng: false,\n    success_message: \"\",\n    error: false,\n    error_message: \"\",\n  },\n  reducers: {},\n  extraReducers: {\n    //? States for books.\n    [fetchAllBooks.pending]: (state) => {\n      state.pending = true;\n    },\n    [fetchAllBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.book = action.payload.books;\n      state.totalPages = action.payload.totalPages;\n      state.currentPage = Number(action.payload.currentPage);\n      state.success_message = action.payload.message;\n    },\n    [fetchAllBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n\n      state.error_message = action.error.message;\n    },\n    //? States for search.\n    [searchBooks.pending]: (state) => {\n      state.pending = true;\n    },\n    [searchBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.searchBook = action.payload.books;\n      state.success_message = action.payload.message;\n    },\n    [searchBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n\n      state.error_message = action.error.message;\n    },\n  },\n});\n\nexport default bookSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}