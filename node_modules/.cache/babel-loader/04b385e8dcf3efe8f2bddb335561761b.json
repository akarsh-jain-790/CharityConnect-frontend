{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nconst baseUrl = `http://localhost:4000/api/v1`;\n/**\n * @asyncThunk Search Books function.\n * @param  string $user - user state\n * @return returns user data in case of success and in case of error return error message.\n */\n\nexport const searchBooks = createAsyncThunk(\"books/searchBooks\", async q => {\n  const response = await fetch(`${baseUrl}/books/searchBooks/?${q}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  const json = await response.json();\n\n  if (response.ok) {\n    return json;\n  } else {\n    throw new Error(json.message);\n  }\n});\n/**\n * @asyncThunk Book fetch function.\n * @param  int page - page number\n * @return returns the books.\n */\n\nexport const fetchAllBooks = createAsyncThunk(\"books/getBooks\", async page => {\n  const response = await fetch(`${baseUrl}/books/getBooks/?page=${page}&limit=6`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  const json = await response.json();\n\n  if (response.ok) {\n    return json;\n  } else {\n    throw new Error(json.message);\n  }\n});\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    book: [],\n    totalPages: 0,\n    currentPage: 0,\n    pendinng: false,\n    success_message: \"\",\n    error: false,\n    error_message: \"\"\n  },\n  reducers: {},\n  extraReducers: {\n    //? States for books.\n    [fetchAllBooks.pending]: state => {\n      state.pending = true;\n    },\n    [fetchAllBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.book = action.payload.books;\n      state.totalPages = action.payload.totalPages;\n      state.currentPage = Number(action.payload.currentPage);\n      state.success_message = action.payload.message;\n    },\n    [fetchAllBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n      state.error_message = action.error.message;\n    },\n    //? States for search.\n    [searchBooks.pending]: state => {\n      state.pending = true;\n    },\n    [searchBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.book = action.payload.books;\n      state.success_message = action.payload.message;\n    },\n    [searchBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n      state.error_message = action.error.message;\n    }\n  }\n});\nexport default bookSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","baseUrl","searchBooks","q","response","fetch","method","headers","json","ok","Error","message","fetchAllBooks","page","bookSlice","name","initialState","book","totalPages","currentPage","pendinng","success_message","error","error_message","reducers","extraReducers","pending","state","fulfilled","action","payload","books","Number","rejected","console","log","reducer"],"sources":["/Users/akarshjain/Desktop/bookoe/src/redux/Slices/bookSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\n\nconst baseUrl = `http://localhost:4000/api/v1`;\n\n/**\n * @asyncThunk Search Books function.\n * @param  string $user - user state\n * @return returns user data in case of success and in case of error return error message.\n */\nexport const searchBooks = createAsyncThunk(\"books/searchBooks\", async (q) => {\n  const response = await fetch(`${baseUrl}/books/searchBooks/?${q}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  const json = await response.json();\n  if (response.ok) {\n    return json;\n  } else {\n    throw new Error(json.message);\n  }\n});\n\n/**\n * @asyncThunk Book fetch function.\n * @param  int page - page number\n * @return returns the books.\n */\nexport const fetchAllBooks = createAsyncThunk(\n  \"books/getBooks\",\n  async (page) => {\n    const response = await fetch(\n      `${baseUrl}/books/getBooks/?page=${page}&limit=6`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n\n    const json = await response.json();\n    if (response.ok) {\n      return json;\n    } else {\n      throw new Error(json.message);\n    }\n  }\n);\n\nexport const bookSlice = createSlice({\n  name: \"books\",\n  initialState: {\n    book: [],\n    totalPages: 0,\n    currentPage: 0,\n    pendinng: false,\n    success_message: \"\",\n    error: false,\n    error_message: \"\",\n  },\n  reducers: {},\n  extraReducers: {\n    //? States for books.\n    [fetchAllBooks.pending]: (state) => {\n      state.pending = true;\n    },\n    [fetchAllBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.book = action.payload.books;\n      state.totalPages = action.payload.totalPages;\n      state.currentPage = Number(action.payload.currentPage);\n      state.success_message = action.payload.message;\n    },\n    [fetchAllBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n\n      state.error_message = action.error.message;\n    },\n    //? States for search.\n    [searchBooks.pending]: (state) => {\n      state.pending = true;\n    },\n    [searchBooks.fulfilled]: (state, action) => {\n      state.pending = false;\n      state.book = action.payload.books;\n      state.success_message = action.payload.message;\n    },\n    [searchBooks.rejected]: (state, action) => {\n      state.pending = false;\n      state.error = true;\n      console.log(\"error\", action.error.message);\n\n      state.error_message = action.error.message;\n    },\n  },\n});\n\nexport default bookSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}